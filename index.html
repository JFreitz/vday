<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Ryana Zhea</title>

<!-- Libraries -->
<script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
<script src="https://unpkg.com/three@0.152.2/examples/js/controls/OrbitControls.js"></script>

<style>
html,body {
  margin:0; padding:0;
  width:100%; height:100%;
  overflow:hidden;
  background:#0c001a;
  color:#ffe4f0;
  font-family:"Georgia",serif;
}
canvas { position:absolute; top:0; left:0; }

/* UI containers */
.screen {
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  pointer-events:none;
}
button {
  pointer-events:auto;
  background:transparent;
  border:2px solid #ff3c7f;
  color:#ff8abf;
  padding:20px 40px;
  font-size:22px;
  cursor:pointer;
  transition:.3s;
}
button:hover {
  background:#ff3c7f;
  color:#12020e;
  transform:scale(1.05);
}

/* Heart and eyes */
.heartSVG {
  width:200px;
  height:200px;
}
.eye { fill:#fff; }
.pupil { fill:#000; transition: .1s; }
</style>
</head>

<body>

<!-- WebGL Canvas -->
<canvas id="glCanvas"></canvas>

<div class="screen" id="introScreen">
  <button id="startBtn">CLICK ME</button>
</div>

<div class="screen hidden" id="heartScreen">
  <svg class="heartSVG" viewBox="0 0 512 512">
    <path id="heartShape" fill="#c8003a"
      d="M256 472s216-135.7 216-295.8S353.8 56 256 160 40 103 40 176.2 256 472 256 472z"/>
    <circle class="eye" cx="200" cy="200" r="22"/>
    <circle class="eye" cx="312" cy="200" r="22"/>
    <circle class="pupil" id="p1" cx="200" cy="200" r="10"/>
    <circle class="pupil" id="p2" cx="312" cy="200" r="10"/>
  </svg>
  <h1>Will you be my Valentineâ€™s date?</h1>
  <button id="yesBtn">YES</button>
</div>

<script>
// THREE.JS SCENE
const canvas = document.getElementById("glCanvas");
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,1000);
camera.position.z = 5;

const renderer = new THREE.WebGLRenderer({antialias:true, canvas, alpha:true});
renderer.setSize(innerWidth,innerHeight);

// Floating particles
const pts = new THREE.BufferGeometry();
const count=1000;
const positions = new Float32Array(count*3);
for(let i=0;i<count*3;i++){
  positions[i] = (Math.random()-0.5)*20;
}
pts.setAttribute('position', new THREE.BufferAttribute(positions,3));
const mat = new THREE.PointsMaterial({color:0xff69a8, size:0.05});
const particles = new THREE.Points(pts, mat);
scene.add(particles);

function animate(){
  requestAnimationFrame(animate);
  particles.rotation.y += 0.0005;
  renderer.render(scene,camera);
}
animate();

// Get UI
const introScreen = document.getElementById("introScreen");
const heartScreen = document.getElementById("heartScreen");
const startBtn = document.getElementById("startBtn");
const yesBtn = document.getElementById("yesBtn");

// Animation
startBtn.onclick = ()=>{
  gsap.to(introScreen, {autoAlpha:0, duration:1.2});
  gsap.to(particles.rotation, {y:2, duration:2, ease:"power2.inOut"});
  setTimeout(()=> {
    heartScreen.classList.remove("hidden");
    gsap.from("#heartShape",{scale:0, transformOrigin:"center center", duration:1.8, ease:"elastic.out(1,0.6)"});
  }, 1200);
};

yesBtn.onclick = ()=>{
  // Heart can morph or flash
  gsap.to("#heartShape",{scale:1.3, duration:.4, yoyo:true, repeat:1});
};

// Cursor follow pupils
document.addEventListener("mousemove", e=>{
  const eyes = [document.getElementById("p1"), document.getElementById("p2")];
  eyes.forEach((p, i)=>{
    const rect = p.getBoundingClientRect();
    const dx = (e.clientX - (rect.left+rect.width/2)) / 40;
    const dy = (e.clientY - (rect.top+rect.height/2)) / 40;
    gsap.to(p, {attr:{cx: (i==0?200:312)+dx, cy:200+dy}, duration:.1});
  });
});

window.onresize = ()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};
</script>

</body>
</html>
